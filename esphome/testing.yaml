substitutions:
  device_name: esp32-garage-testing
  friendly_name: "Garage Testing"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}
  comment: "Minimal web_server sorting_groups test build"
  platformio_options:
    board_build.flash_mode: dio

esp32:
  board: esp32-c6-devkitc-1
  variant: esp32c6
  framework:
    type: esp-idf
    version: recommended
    sdkconfig_options:
      CONFIG_ESP_WIFI_ENABLE_WPA3_SAE: "n"
      CONFIG_ESP_WIFI_ENABLE_SAE_PK: "n"
      CONFIG_ESP_WIFI_SOFTAP_SAE_SUPPORT: "n"
      CONFIG_ESP_WIFI_ENABLE_WPA3_OWE_STA: "n"

logger:
  level: DEBUG
  hardware_uart: USB_SERIAL_JTAG

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  fast_connect: on
  ap:
    ssid: "garage-testing"
    password: !secret ap_password

api:
  encryption:
    key: !secret api_encryption_key

ota:
  - platform: esphome
    password: !secret ota_password

captive_portal:

web_server:
  port: 80
  version: 3
  include_internal: false
  sorting_groups:
    - id: a_group_car
      name: "Car Positioning"
      sorting_weight: 10
    - id: b_group_door
      name: "Garage Door"
      sorting_weight: 20
    - id: c_group_config
      name: "Configuration"
      sorting_weight: 30
    - id: d_group_diag
      name: "Diagnostic"
      sorting_weight: 40

text_sensor:
  - platform: template
    name: "Test - Car Positioning (expect 1st)"
    lambda: 'return {"car group"};'
    update_interval: 60s
    web_server:
      sorting_group_id: a_group_car
      sorting_weight: 1

  - platform: template
    name: "Test - Garage Door (expect 2nd)"
    lambda: 'return {"door group"};'
    update_interval: 60s
    web_server:
      sorting_group_id: b_group_door
      sorting_weight: 2

  - platform: template
    name: "Test - Configuration (expect 3rd)"
    lambda: 'return {"config group"};'
    update_interval: 60s
    web_server:
      sorting_group_id: c_group_config
      sorting_weight: 3

  - platform: template
    name: "Test - Diagnostic (expect 4th)"
    lambda: 'return {"diag group"};'
    update_interval: 60s
    web_server:
      sorting_group_id: d_group_diag
      sorting_weight: 4
